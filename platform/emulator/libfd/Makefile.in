#  Authors:
#    Michael Mehl (mehl@dfki.de)
#
#  Contributors:
#    optional, Contributor's name (Contributor's email address)
#
#  Copyright:
#    Michael Mehl (mehl@dfki.de)
#
#  Last change:
#    $Date$ by $Author$
#    $Revision$
#
#  This file is part of Mozart, an implementation
#  of Oz 3:
#     $MOZARTURL$
#
#  See the file "LICENSE" or
#     $LICENSEURL$
#  for information on usage and redistribution
#  of this file, and for a DISCLAIMER OF ALL
#  WARRANTIES.

include ../Makefile.vars

BUILDTOP        = @BUILDTOP@
VPATH           = @srcdir@
FDDIR           = @srcdir@
INCS            = -I. -I$(FDDIR)/.. -I..

FDTARGETS       = @FDTARGETS@

FDLIBSRCS = arith.cc fdaux.cc bool.cc \
            card.cc cd.cc count.cc \
            rel.cc disjoint.cc std.cc \
            sum.cc sumequal.cc \
            distance.cc misc.cc streamProps.cc \
            sumd.cc sumabs.cc complalldist.cc diffn.cc

FDLIBOBJS = $(FDLIBSRCS:.cc=.o)

SCHEDLIBSRCS = scheduling.cc schedulingDist.cc \
               schedulingDistAux.cc taskintervals.cc

SCHEDLIBOBJS = $(SCHEDLIBSRCS:.cc=.o)

all: $(FDTARGETS)

libfd.so: $(FDLIBOBJS)
        $(DYNLD) -o $@ $(FDLIBOBJS)

libsched.so: $(SCHEDLIBOBJS)
        $(DYNLD) -o $@ $(SCHEDLIBOBJS)

libfd.a: $(FDLIBOBJS)
        $(AR) -rc $@ $(FDLIBOBJS) && $(RANLIB) $@

libsched.a: $(SCHEDLIBOBJS)
        $(AR) -rc $@ $(SCHEDLIBOBJS) && $(RANLIB) $@

install:: @INSTALL_PROP@

install-prop:
        $(INSTALL_BIN) $(FDTARGETS) $(bindir)

depend:: Makefile $(FDLIBSRCS) $(SCHEDLIBSRCS)
        $(DEPEND) $(FDLIBSRCS:%=$(FDDIR)/%) $(SCHEDLIBSRCS:%=$(FDDIR)/%) \
                > Makefile.deps

-include Makefile.deps
include ../Makefile.rules

distclean::
        $(RM) Makefile

realclean::
        $(RM) *.a *.so
