#  Authors:
#    Michael Mehl (mehl@dfki.de)
#
#  Contributors:
#    optional, Contributor's name (Contributor's email address)
#
#  Copyright:
#    Michael Mehl (mehl@dfki.de)
#
#  Last change:
#    $Date$ by $Author$
#    $Revision$
#
#  This file is part of Mozart, an implementation
#  of Oz 3:
#     $MOZARTURL$
#
#  See the file "LICENSE" or
#     $LICENSEURL$
#  for information on usage and redistribution
#  of this file, and for a DISCLAIMER OF ALL
#  WARRANTIES.


VPATH           = @srcdir@
FDDIR           = @srcdir@
FDINCS          = -I.. -I$(FDDIR)/..
CPPFLAGS        += $(FDINCS)
CFLAGS          += $(FDINCS)
CXXFLAGS        += $(FDINCS)
DEPEND          += $(FDINCS)
FDTARGETS       = @FDTARGETS@

FDLIBSRCS = arith.cc fdaux.cc bool.cc \
            card.cc cd.cc count.cc \
            rel.cc disjoint.cc std.cc \
            sum.cc sumequal.cc \
            distance.cc misc.cc streamProps.cc \
            sumd.cc sumabs.cc complalldist.cc

FDLIBOBJS = $(FDLIBSRCS:.cc=.o)

SCHEDLIBSRCS = scheduling.cc schedulingDist.cc \
               schedulingDistAux.cc taskintervals.cc

SCHEDLIBOBJS = $(SCHEDLIBSRCS:.cc=.o)

all: $(FDTARGETS)

fdlib.so: $(FDLIBOBJS)
        $(DYNLD) -o $@ $(FDLIBOBJS)

schedlib.so: $(SCHEDLIBOBJS)
        $(DYNLD) -o $@ $(SCHEDLIBOBJS)

libfd.a: $(FDLIBOBJS)
        $(AR) -rc $@ $(FDLIBOBJS) && $(RANLIB) $@

libsched.a: $(SCHEDLIBOBJS)
        $(AR) -rc $@ $(SCHEDLIBOBJS) && $(RANLIB) $@

install: @INSTALL_PROP@

install-prop:
        $(INSTALL_BIN) $(FDTARGETS) $(bindir)

depend: $(FDLIBSRCS) $(SCHEDLIBSRCS)
        $(DEPEND) `for f in $(FDLIBSRCS) $(SCHEDLIBSRCS) ; do echo $(FDDIR)/$$f; done` >> Makefile

realclean::
        $(RM) *.a *.so

include $(FDDIR)/../Makefile.rules
