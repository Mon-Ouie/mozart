#! /bin/sh
#
# oztool c++ ...        invokes the right c++ compiler with the right options
# oztool cc  ...        same for the c compiler
# oztool ld  ...        creates DLLs
# oztool platform       echoes the oz platform

# determine oztool includes
if test "${oztool_includes-NONE}" = NONE; then
  if test -n "$OZHOME" && test -e "$OZHOME/include/mozart.h"; then
    oztool_includes="-I$OZHOME/include"
  else
    oz_tmp=`dirname $0`
    oz_tmp=`cd $oz_tmp/.. & pwd`
    if test -e "$oz_tmp/include/mozart.h"; then
      oztool_includes="-I$oz_tmp/include"
    else
      oztool_includes="-I@prefix@/include";
    fi
  fi
fi

: ${oztool_cxx="@OZTOOL_CXX@ @CDYNOPT@ $oztool_includes"}
: ${oztool_cc="cc @CDYNOPT@ $oztool_includes"}
: ${oztool_ld="ld @TOOLLDFLAGS@"}
: ${oztool_platform="@platform@"}

cmd=$1
shift

case "$cmd" in
  c++) cmd=$oztool_cxx;;
  cc ) cmd=$oztool_cc;;
  ld ) cmd=$oztool_ld;;
  platform )
    echo "$oztool_platform"
    exit 0;;
  *  )
  echo "oztool: unknown command $cmd" 1>&2
  exit 1
  ;;
esac

exec $cmd "$@"
