BINDIR  = $(OZHOME)/bin
SHELL   = /bin/sh
DISTDIR = .

SCRIPTS = oz oz2lpr oz+ ozplatform ozwish
LINKS   = oz- ozc ozsa ozsac oz.compiler oz.emulator ozdo \
          ozwindowmanager ozemacs ozdemo

all::
        @echo ""
        @echo "The following targets are available"
        @echo " install         {scheidhr,mehl}@dfki.uni-sb.de"
        @echo ""

install:: $(BINDIR)
        install -m 555 $(SCRIPTS) $(BINDIR)
        @set -x; cd $(BINDIR);\
        for file in $(LINKS); \
        do\
           rm -f $$file; \
           ln -s oz $$file; \
        done

$(BINDIR):
        install -d -m 775 $@

dist: common $(PLATFORMS)

common:
        (cd $(OZHOME)/..; \
        tar -cf - oz/bin oz/demo oz/include oz/lib oz/README oz/doc \
                oz/ozwish/tcl ) | \
        compress > $(DISTDIR)/oz-$(OZVERSION)-$@.tar.Z

PLATFORMS = sunos-sparc solaris-sparc ultrix-mips linux-i486 hpux-700 \
        irix-mips

$(PLATFORMS):
        (cd $(OZHOME)/..; \
        tar -cf - oz/platform/$@ oz/ozwish/platform/$@) | \
        compress > $(DISTDIR)/oz-$(OZVERSION)-$@.tar.Z
