#!/bin/sh

if [ -x /bin/uname ]; then uname=/bin/uname
elif [ -x /usr/bin/uname ]; then uname=/usr/bin/uname
else echo "Cannot find uname" 1>&2 ; exit 1
fi

system="`$uname -s`_`$uname -r`"

case $system in
   SunOS_4.1*)
        DYNLD="ld"
        ;;
   SunOS_5*)
        DYNLD="ld -G"
        ;;
   Linux_*)
        DYNLD="ld -shared"
        ;;
   HP-UX_*)
        DYNLD="ld -b"
        ;;
   IRIX_5*)
        DYNLD="ld -shared -check_registry /dev/null"
        ;;
   OSF1_*)
        DYNLD="ld -shared -expect_unresolved '*'"
        ;;
   FreeBSD_*|NetBSD_*)
        DYNLD="ld -Bshareable"
        ;;
   *)
        echo "$0: platform $system not supported"
        exit 1
esac

$DYNLD "$@"
