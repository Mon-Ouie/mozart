#!/bin/sh

if [ -x /bin/uname ]; then uname=/bin/uname
elif [ -x /usr/bin/uname ]; then uname=/usr/bin/uname
else echo "Cannot find uname" 1>&2 ; exit 1
fi

system="`$uname -s`-`$uname -r`"

case $system in
   SunOS-4.1*)
	DYNLD="ld"
   	;;
   SunOS-5*)
	DYNLD="ld -G"
	;;
   Linux-*)
	DYNLD="ld -shared"
   	;;
   HP-UX-*)
	DYNLD="ld -b"
	;;
   IRIX-5*)
	DYNLD="ld -shared -check_registry /dev/null"
   	;;
   *alpha*OSF1*)
	DYNLD="ld -shared -expect_unresolved '*'"
   	;;
   FreeBSD-*|NetBSD-*)
	DYNLD="ld -Bshareable"
   	;;
   *)
	echo "$0: platform $system not supported"
	exit 1
esac

$DYNLD "$@"