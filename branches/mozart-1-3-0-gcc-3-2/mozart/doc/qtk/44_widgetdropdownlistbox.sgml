<section ID="chapter.widgets.dropdownlistbox">
  <TITLE>Dropdownlistbox widget</TITLE>

<subsection> <TITLE>Description</TITLE>

<P>
A dropdownlistbox is a widget that displays a button with a down arrow. Clicking this button pops down a listbox allowing the user to select one of the displayed items. The listbox can ben pulled down either at the left or at the right of the button. Usually a label or an entry are placed at the left of the dropdownlistbox. The user can change the contents of that widget by selecting an item in the listbox.
</P>
<P>
A dropdownlistbox is a just a button and a listbox linked together. All parameters that begins by <<button>> configure the button part of the widget while the remaining parameters configure the listbox part of the widget. See these specific widgets for more details.
</P>
<P>
<EM>Indices</EM>
</P>
<P>
Many of the widget methods for listboxes take one or more indices as arguments. An index specifies a particular element of the listbox, in any of the following ways: 
<LIST>

<ITEM> integer : Specifies the element as a numerical index, where 0 corresponds to the first element in the listbox.

<ITEM> <<active>> : Indicates the element that has the location cursor. This element will be displayed with an underline when the listbox has the keyboard focus, and it is specified with the activate widget method. 

<ITEM> <<anchor>> : Indicates the anchor point for the selection, which is set with the selection <<anchor>> method.

<ITEM> <<end>> :  Indicates the end of the listbox. For some commands this means just after the last element; for other commands it means the last element. 

<ITEM> <<'@'#X#','#Y>> :  Indicates the element that covers the point in the listbox window specified by X and Y (in pixel coordinates). If no element covers that point, then the closest element to that point is used. 
</LIST>

</P>

<subsection> <TITLE>Parameters</TITLE>

<P>
<LIST>
<ITEM> <<1:LVS>> : Specifies a list of virtual strings that represents the items in the listbox.  This parameter can be only used with the <<set()>> and <<get()>> methods. <<LVS>> must be a list of virtual strings.

<ITEM> <<init:LVS>> : Specifies a list of virtual strings that represents the items in the listbox.  This parameter can be only used at creation time. <<LVS>> must be a list of virtual strings.

<ITEM> <<return:V>> : When the window is closed, <<V>> is bound to a list of virtual strings representing the items in the listbox. <<V>> must be a free variable.

<ITEM> <<reload:V>> : This parameter can be only used with the <<get()>> method and returns a list of virtual strings that represents the contents of the listbox. This is the same as the <<1>> option except that it is slower. However if you use weird methods for modifying the contents of the list (using the <<tk>> method for example) and bypassing the methods described here, you may find cases where you need to use the <<reload>> parameter to resynchronize the states of Tk and QTk.

<ITEM> <<listselection:LB>> : Specifies a list of booleans. This list contains as many booleans as there are items in the listbox. For each item, the corresponding boolean in the list is true if the item is selected, false otherwise. <<LB>> must be a list of booleans.

<ITEM> <<firstselection:V>> : Can be used with the <<get()>> method only. Binds V to the number of the first selected item.

&param_background;
&param_borderwidth;
&param_cursor;
&param_exportselection;
&param_font;

<ITEM> <<height:I>> : Specifies the desired height for the window, in lines. If zero or less, then the desired height for the window is made just large enough to hold all the elements in the listbox. <<I>> must be an integer.

&param_highlightbackground;
&param_highlightcolor;
&param_highlightthickness;
&param_relief;
&param_selectbackground;
&param_selectborderwidth;
&param_selectforeground;
&param_setgrid;
&param_takefocus;

<ITEM> <<width:I>> : Specifies the desired width for the window in characters. If the font doesn't have a uniform width then the width of the character ``0'' is used in translating from character units to screen units. If zero or less, then the desired width for the window is made just large enough to hold all the elements in the listbox.  <<I>> must be an integer.

<ITEM> <<selectmode:A>> : Specifies one of several styles for manipulating the selection. The value of <<A>> may be arbitrary, but the default bindings expect it to be either one of the following atoms : <<single>>, <<browse>>, <<multiple>>, or <<extended>>; the default value is <<browse>>. 

<ITEM> <<action:C>> : Specifies an action to execute juste after the user changed the selection. <<C>> can take several different forms (see <ptr to="basics.events">).

&param_lrscrollbar;
&param_tdscrollbar;
&param_scrollwidth;
&param_glue;
&param_padx;
&param_pady;
&param_feature;
&param_handle;
&param_tooltips;

<ITEM> <<buttonactivebackground:C>> : Specifies background color for the button to use when drawing active elements. An element (a widget or portion of a widget) is active if the mouse
    cursor is positioned over the element and pressing a mouse button will cause some action to occur. For some elements on Windows and Macintosh systems, the active color will only be used while mouse button 1 is
    pressed over the element. <<C>> must be a valid color (see <ptr to="misc.color">)

<ITEM> <<buttonactiveforeground:C>> : Specifies foreground color for the button to use when drawing active elements. An element (a widget or portion of a widget) is active if the mouse
    cursor is positioned over the element and pressing a mouse button will cause some action to occur. For some elements on Windows and Macintosh systems, the active color will only be used while mouse button 1 is
    pressed over the element. C must be a valid color (see <ptr to="misc.color">)

<ITEM> <<buttonbackground:C>> : Specifies the normal background color for the button to use when displaying the widget. <<C>> must be a valid color (see <ptr to="misc.color">).

<ITEM> <<buttonforeground:C>> : Specifies the normal foreground color for the button to use when displaying the widget. <<C>> must be a valid color (see <ptr to="misc.color">)

<ITEM> <<buttondisabledforeground:C>> : Specifies foreground color for the button to use when drawing a disabled element. If the option is specified as an empty string (which is typically
    the case on monochrome displays), disabled elements are drawn with the normal foreground color but they are dimmed by drawing
    them with a stippled fill pattern. <<C>> must be a valid color (see <ptr to="misc.color">)

<ITEM> <<buttonhighlightbackground:C>> : Specifies the color for the button to display in the traversal highlight region when the widget does not have the input focus.  <<C>> must be a valid color (see <ptr to="misc.color">)

<ITEM> <<buttonhighlightcolor:C>> : Specifies the color for the button to use for the traversal highlight rectangle that is drawn around the widget when it has the input focus. <<C>> must be a valid color (see <ptr to="misc.color">)

<ITEM> <<buttonhighlightthickness:P>> : Specifies a non-negative value indicating the width of the highlight rectangle of the button to draw around the outside of the widget when it has
    the input focus. If the value is zero, no focus highlight is drawn
    around the widget. <<P>> must be a valid screen distance (see  <ptr to="misc.distance">).

<ITEM> <<buttontakefocus:B>> : Determines whether the button accepts the focus during keyboard traversal (e.g., Tab and Shift-Tab). Before setting the focus to a window, the traversal mechanims consult the value of the takeFocus option. A value of <<false>> means that the window should be skipped
    entirely during keyboard traversal. <<true>> means that the window should receive the input focus as long as it is viewable (it and all of its
    ancestors are mapped). <<B>> must be a boolean.


<ITEM> <<buttondefault:A>> : Specifies one of three states for the default ring of the button : <<normal>>, <<active>>, or <<disabled>>. In active state, the button is
    drawn with the platform specific appearance for a default button. In normal state, the button is drawn
    with the platform specific appearance for a non-default button, leaving enough space to draw the default
    button appearance. The normal and active states will result in buttons of the same size. In disabled state,
    the button is drawn with the non-default button appearance without leaving space for the default
    appearance. The disabled state may result in a smaller button than the active state ring. <<A>> must be one of these three atoms : <<normal>>, <<active>>, or <<disabled>>.

<ITEM> <<state:A>> : Specifies one of three states for the button: <<normal>>, <<active>>, or <<disabled>>. In normal state the button is
    displayed using the foreground and background options. The active state is typically used when the
    pointer is over the button. In active state the button is displayed using the activeforeground and
    activebackground options. Disabled state means that the button should be insensitive: the default
    bindings will refuse to activate the widget and will ignore mouse button presses. In this state the
    disabledforeground and background options determine how the button is displayed. <<A>> must be one of these three atoms : <<normal>>, <<active>>, or <<disabled>>.

</LIST>

</P>

<subsection> <TITLE>Interface</TITLE>

<P>
The object you get by an handle on the widget implements the following methods :

<LIST>

&interface_set;
&interface_get;
&interface_bind;
&interface_getFocus;
&interface_setGrab;
&interface_releaseGrab;
&interface_getGrabStatus;
&interface_raise;
&interface_lower;
&interface_winfo;

<ITEM> <<activate(I)>> : Sets the active element to the one indicated by <<I>>. The active element is drawn with an underline when the widget has the input focus.

<ITEM> <<bbox(I V)>> : Binds <<V>> to a list of four numbers describing the bounding box of the text in the element given by <<I>>. The first two elements of the list give the x and y coordinates of the upper-left corner of the screen area covered by the text (specified in pixels relative to the widget) and the last two elements give the width and height of the area, in pixels. If no part of the element given by index is visible on the screen then the result is an empty list; if the element is partially visible, the result gives the full area of the element, including any parts that are not visible. 

<ITEM> <<delete(I ?J)>> : Deletes one or more elements of the listbox. <<I>> and <<J>> are indices specifying the first and last elements in the range to delete. If <<J>> isn't specified it defaults to <<I>>, i.e. a single element is deleted. 

<ITEM> <<index(A I)>> : Binds I to an integer giving index value that corresponds to <<A>>. 

<ITEM> <<insert(I LVS)>> : Inserts the list of virtual strings <<LVS>> just before the element at position <<I>>. If <<I>> is the atom <<end>>, the list is inserted after all elements.

<ITEM> <<nearest(I V)>> : Given <<I>>, a y-coordinate within the listbox window, this command binds <<V>> to the index of the (visible) listbox element nearest to that y-coordinate. 

<ITEM> <<scan(...)>> : This command is used to implement scanning on listboxes. It has two forms, depending on option: 
<LIST>
<ITEM> <<scan(mark X Y)>> : Records X and Y and the listbox's current view; used in conjunction with later <<scan(dragto ...)>> commands. Typically this command is associated with a mouse button press in the widget and <<X>> and <<Y>> are the coordinates of the mouse. <<X>> and <<Y>> must be valid distances (see <ptr to="misc.distance">).

<ITEM> <<scan(dragto X Y)>> : This command computes the difference between its <<X>> and <<Y>> arguments (which are
        typically mouse coordinates) and the <<X>> and <<Y>> arguments to the last <<scan(mark ...)>>
        command for the widget. It then adjusts the view by 10 times the difference in
        coordinates. This command is typically associated with mouse motion events in the
        widget, to produce the effect of dragging the listbox at high speed through its
        window.

</LIST>

<ITEM> <<see(I)>> : Adjust the view in the listbox so that the element given by <<I>> is visible. If the element is already visible then the command has no effect; if the element is near one edge of the window then the listbox scrolls to bring the element into view at the edge; otherwise the listbox scrolls to center the element. 

<ITEM> <<size(V)>> : Binds <<V>> to an integer indicating the total number of elements in the listbox. 

</LIST>

</section>
